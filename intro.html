
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Contextualizaci√≥n de la Problem√°tica &#8212; Informe</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'intro';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="An√°lisis Exploratorio de datos" href="eda.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="#">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Informe - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Informe - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1 current active">
                <a class="reference internal" href="#">
                    Contextualizaci√≥n de la Problem√°tica
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="eda.html">An√°lisis Exploratorio de datos</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementacion-randomforest.html">Implementaci√≥n 1: Modelo RandomForest</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementacion-xgboost.html">Implementaci√≥n 2: Gradient Boosted Trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementacion-logisticR.html">Implementaci√≥n 3: Modelo Logistic Regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementacion-svc.html">Implementaci√≥n 4: Modelo Support Vector Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="calibracion.html">Calibraci√≥n de clasificadores</a></li>
<li class="toctree-l1"><a class="reference internal" href="despliegue_modelo.html">Datos de estaciones en linea- Precipitaciones de lluvia acumulada</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fintro.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/intro.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Contextualizaci√≥n de la Problem√°tica</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Contextualizaci√≥n de la Problem√°tica</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exploracion-de-modelos-de-clasificacion-e-implementacion-de-calibracion">Exploraci√≥n de modelos de clasificaci√≥n e implementaci√≥n de calibraci√≥n</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion">Introducci√≥n</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objetivos">Objetivos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#datos">Datos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#metodologia">Metodolog√≠a</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#modelos">Modelos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#esquema-de-entrenamiento">Esquema de entrenamiento</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metrica-de-evaluacion">M√©trica de evaluaci√≥n</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calibradores-de-probabilidad">Calibradores de probabilidad</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#medidas-para-evaluar-calibracion">Medidas para evaluar calibraci√≥n</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#calibration-curves">Calibration curves</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#brier-score-y-log-loss">Brier score y Log Loss</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#expected-calibration-error-ece">Expected Calibration Error (ECE)</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metodos-de-calibracion">M√©todos de Calibraci√≥n</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tabla-de-contenidos"><strong>Tabla de contenidos</strong></a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="contextualizacion-de-la-problematica">
<h1>Contextualizaci√≥n de la Problem√°tica<a class="headerlink" href="#contextualizacion-de-la-problematica" title="Link to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="exploracion-de-modelos-de-clasificacion-e-implementacion-de-calibracion">
<h1>Exploraci√≥n de modelos de clasificaci√≥n e implementaci√≥n de calibraci√≥n<a class="headerlink" href="#exploracion-de-modelos-de-clasificacion-e-implementacion-de-calibracion" title="Link to this heading">#</a></h1>
<section id="introduccion">
<h2>Introducci√≥n<a class="headerlink" href="#introduccion" title="Link to this heading">#</a></h2>
<p>Se emprende un an√°lisis exhaustivo de un problema de clasificaci√≥n, comenzando con un enfoque sistem√°tico para garantizar resultados robustos y confiables. El primer paso en este proceso es realizar un An√°lisis Exploratorio de Datos (EDA), que permitir√° examinar la distribuci√≥n de las variables en el conjunto de datos de entrenamiento. A trav√©s del EDA, se busca identificar patrones subyacentes, y cualquier irregularidad que pueda influir en el rendimiento de los modelos. Esta etapa es crucial, ya que una comprensi√≥n profunda de los datos es fundamental para tomar decisiones informadas en las siguientes fases del an√°lisis.</p>
<p>Una vez extra√≠das las principales caracter√≠sticas del conjunto de datos, se proceder√° a explorar el rendimiento de cuatro modelos de clasificaci√≥n de gran relevancia: Support Vector Machines (SVM), Random Forest Classifier, Gradient Boosting Trees y Regresi√≥n Log√≠stica. Cada uno de estos modelos posee sus propias fortalezas y debilidades, y el objetivo es evaluarlos en un entorno controlado para determinar cu√°l de ellos se adapta mejor al problema en cuesti√≥n. A trav√©s de la comparaci√≥n de m√©tricas clave como la precisi√≥n, la sensibilidad, la especificidad y el AUC-ROC, se buscar√° identificar el modelo que ofrezca el mejor equilibrio entre sesgo y varianza.</p>
<p>Adem√°s de evaluar el rendimiento base de estos modelos, un aspecto crucial del an√°lisis ser√° la calibraci√≥n de probabilidades. La salida de un clasificador debe ser una probabilidad posteriormente calibrada para permitir el posprocesamiento (Platt, 1999). Muchos modelos de clasificaci√≥n, especialmente aquellos como SVM y Gradient Boosting Trees, pueden producir predicciones de probabilidad que no est√°n perfectamente calibradas. Esto significa que la probabilidad predicha no siempre refleja adecuadamente la verdadera probabilidad de pertenencia a una clase. Por lo tanto, se examinar√° si los modelos necesitan un ajuste adicional a trav√©s de t√©cnicas de calibraci√≥n, como la regresi√≥n isot√≥nica o el m√©todo de Platt, para mejorar la precisi√≥n de las probabilidades predichas.</p>
<p>Finalmente, el an√°lisis concluir√° con una comparaci√≥n integral de los resultados obtenidos de los modelos, tanto antes como despu√©s de la calibraci√≥n de probabilidades. El objetivo es identificar el modelo que no solo tenga un alto rendimiento en t√©rminos de precisi√≥n, sino que tambi√©n ofrezca predicciones de probabilidad bien calibradas. Este enfoque detallado garantizar√° que el modelo seleccionado no solo sea el m√°s preciso, sino tambi√©n el m√°s fiable para la toma de decisiones en la prediccion del riesgo de deslizamiento de tierra.</p>
</section>
<section id="objetivos">
<h2>Objetivos<a class="headerlink" href="#objetivos" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Desarrollar un modelo de clasificaci√≥n binaria para estimar las clases de deslizamientos de tierra positivas y negativas para un conjunto de datos de entrenamiento dado, mediante diferentes t√©cnicas para mejorar rendimientos de los modelos con el fin de tener un insumo para la calibraci√≥n de las probabilidades</p></li>
</ul>
<br>
<ul class="simple">
<li><p>Estimar el m√©todo de calibraci√≥n a usar, por medio de exploraci√≥n de diferentes m√©todos que se ajusten al comportamiento del modelo para estimar la probabilidad de deslizamiento de tierra dada las calcificaciones del modelo entrenado</p></li>
</ul>
<br>
<ul class="simple">
<li><p>Desplegar mapa geogr√°fico de la ciudad de Cali para que pueda capturar por zonas geogr√°ficas las probabilidades de deslizamiento de tierras con el fin de tener una herramienta predictiva de anticipaci√≥n</p></li>
</ul>
</section>
<section id="datos">
<h2>Datos<a class="headerlink" href="#datos" title="Link to this heading">#</a></h2>
<p>Los deslizamientos de tierra (tambi√©n llamados movimientos en masa o derrumbes) son los eventos de riesgo de mayor frecuencia e impacto en el territorio de Santiago de Cali. Estas situaciones tienen diferentes detonantes como la lluvia acumulada o intensa, intervenci√≥n humana y sismos. El desarrollo de un Mecanismo de Anticipaci√≥n o Alerta Temprana para este tipo de fen√≥meno es esencial para la preparaci√≥n institucional y comunitaria con el objetivo de salvar vidas y bienes en el territorio.</p>
<p>La alcald√≠a de Cali, al integrarse con empresas expertas en desarrollo tecnol√≥gico y anal√≠tica, pretende levantar este requerimiento de un modelo predictor de deslizamiento de tierras. Junto con SATIC (<a class="reference external" href="https://satic.cali.gov.co/satic">Sistema de Alertas Tempranas Inteligentes y Comunitarias</a>), las oficinas gestoras de la alcald√≠a y la empresa donde trabajo se han empezado en el desarrollo de este modelo.</p>
<p>El equipo de ge√≥logos de SATIC, cuenta con los siguientes datos que recibe de diversas fuentes y que ya tienen catalogados como eventos de ‚ÄúS√≠ deslizamiento‚Äù y eventos de ‚ÄúNo deslizamiento‚Äù dado su tiempo enfrentando este tipo de desastres. En el siguiente mapa de ejemplo, se muestran los datos donde por latitud y longitud se ubica cada putno de evento, los puntos rojos indican S√≠ deslizamiento y los verdes indican No deslizamiento.</p>
<p><img alt="eventos" src="_images/puntos_eventos.png" /></p>
<p>Importamos los conjuntos de datos de entrenamiento con el que contamos, los cuales pasaron por un pre-procesamiento para tenerlos listos para la anal√≠tica. Estos son provenientes de los archivos Eventos_SI_MM.csv y Eventos_NO_MM.csv proporcionados por la oficina de SATIC de la alcald√≠a de Cali. Estos contienen datos sobre de precipitaciones en diferentes periodos de tiempo, algunas caracter√≠sticas del suelo y la categorizaci√≥n binaria si hubo un derrumbe o no</p>
<p>A continuaci√≥n, podemos ver la biblioteca de datos de las variables iniciales a tomar en cuenta con su descripci√≥n, cabe resaltar que cada una de estas features est√° asociada a un punto geogr√°fico visto en la imagen anterior</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Variable</strong></p></th>
<th class="head"><p><strong>Tipo de dato</strong></p></th>
<th class="head"><p><strong>Descripci√≥n</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Elevacion</p></td>
<td><p>Num√©rico</p></td>
<td><p>Elevaci√≥n del punto de movimiento en masa en metros sobre el nivel del mar (metros)</p></td>
</tr>
<tr class="row-odd"><td><p>Pendiente</p></td>
<td><p>Num√©rico</p></td>
<td><p>Pendiente del punto de movimiento en masa en porcentaje (%)</p></td>
</tr>
<tr class="row-even"><td><p>Zonificacion</p></td>
<td><p>Categ√≥rico</p></td>
<td><p>Es un nivel de riesgo: Nombre de la clasificaci√≥n de amenaza o riesgo del punto de movimiento en masa asignado por ge√≥logos de la alcald√≠a de Cali basado en el historial de casos de deslizamientos de tierra en la ciudad</p></td>
</tr>
<tr class="row-odd"><td><p>Tipo_geologia</p></td>
<td><p>Categ√≥rico</p></td>
<td><p>Nombre de la unidad geol√≥gica asociada al punto de movimiento en masa</p></td>
</tr>
<tr class="row-even"><td><p>Cobertura_Suelo</p></td>
<td><p>Categ√≥rico</p></td>
<td><p>Nombre de la cobertura de suelo Metodolog√≠a Land Corine Escala 1:25000</p></td>
</tr>
<tr class="row-odd"><td><p>24h</p></td>
<td><p>Num√©rico</p></td>
<td><p>Precipitaci√≥n de lluvia acumulada en 24 horas en mil√≠metros. Este dato proviene de estaciones medidoras de lluvia a trav√©s de la ciudad</p></td>
</tr>
<tr class="row-even"><td><p>7d</p></td>
<td><p>Num√©rico</p></td>
<td><p>Precipitaci√≥n de lluvia acumulada en 7 d√≠as en mil√≠metros. Este dato proviene de estaciones medidoras de lluvia a trav√©s de la ciudad</p></td>
</tr>
<tr class="row-odd"><td><p>10d</p></td>
<td><p>Num√©rico</p></td>
<td><p>Precipitaci√≥n de lluvia acumulada en 10 d√≠as en mil√≠metros. Este dato proviene de estaciones medidoras de lluvia a trav√©s de la ciudad</p></td>
</tr>
<tr class="row-even"><td><p>15d</p></td>
<td><p>Num√©rico</p></td>
<td><p>Precipitaci√≥n de lluvia acumulada en 15 d√≠as en mil√≠metros. Este dato proviene de estaciones medidoras de lluvia a trav√©s de la ciudad</p></td>
</tr>
<tr class="row-odd"><td><p>30d</p></td>
<td><p>Num√©rico</p></td>
<td><p>Precipitaci√≥n de lluvia acumulada en 30 d√≠as en mil√≠metros. Este dato proviene de estaciones medidoras de lluvia a trav√©s de la ciudad</p></td>
</tr>
<tr class="row-even"><td><p>60d</p></td>
<td><p>Num√©rico</p></td>
<td><p>Precipitaci√≥n de lluvia acumulada en 60 d√≠as en mil√≠metros. Este dato proviene de estaciones medidoras de lluvia a trav√©s de la ciudad</p></td>
</tr>
<tr class="row-odd"><td><p>90d</p></td>
<td><p>Num√©rico</p></td>
<td><p>Precipitaci√≥n de lluvia acumulada en 90 d√≠as en mil√≠metros. Este dato proviene de estaciones medidoras de lluvia a trav√©s de la ciudad</p></td>
</tr>
<tr class="row-even"><td><p>deslizamiento</p></td>
<td><p>Binario</p></td>
<td><p>Indica si hubo deslizamiento de tierra en el punto de movimiento en masa (1 √≥ 0)</p></td>
</tr>
</tbody>
</table>
</div>
<p>As√≠ se ven las primeras 5 lineas de nuestra data limpia:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>ELEVACION</strong></p></th>
<th class="head"><p><strong>PENDIENT</strong></p></th>
<th class="head"><p><strong>zonificacion</strong></p></th>
<th class="head"><p><strong>Nomenclatura_del_Suelo</strong></p></th>
<th class="head"><p><strong>tipo_geologia</strong></p></th>
<th class="head"><p><strong>24h</strong></p></th>
<th class="head"><p><strong>7d</strong></p></th>
<th class="head"><p><strong>10d</strong></p></th>
<th class="head"><p><strong>15d</strong></p></th>
<th class="head"><p><strong>30d</strong></p></th>
<th class="head"><p><strong>60d</strong></p></th>
<th class="head"><p><strong>90d</strong></p></th>
<th class="head"><p><strong>deslizamientos</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1085.033813</p></td>
<td><p>36.38882065</p></td>
<td><p>Riesgo alto</p></td>
<td><p>Otras superficies artificiales sin construcci√≥n</p></td>
<td><p>Formacion Volcanica</p></td>
<td><p>20.0</p></td>
<td><p>33.0</p></td>
<td><p>38.0</p></td>
<td><p>254.0</p></td>
<td><p>477.0</p></td>
<td><p>773.0</p></td>
<td><p>872.0</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>1027.715698</p></td>
<td><p>25.13285637</p></td>
<td><p>Amenaza baja</p></td>
<td><p>Bosque mixto denso bajo de tierra firme</p></td>
<td><p>Formacion Jamundi</p></td>
<td><p>13.0</p></td>
<td><p>17.0</p></td>
<td><p>17.0</p></td>
<td><p>51.0</p></td>
<td><p>65.0</p></td>
<td><p>118.0</p></td>
<td><p>252.0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>1173.279907</p></td>
<td><p>14.10933781</p></td>
<td><p>Amenaza baja</p></td>
<td><p>Pasto cultivado enmalezado</p></td>
<td><p>Formacion Jamundi</p></td>
<td><p>0.0</p></td>
<td><p>7.2</p></td>
<td><p>21.1</p></td>
<td><p>23.1</p></td>
<td><p>128.3</p></td>
<td><p>292.7</p></td>
<td><p>599.4</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>973.211731</p></td>
<td><p>12.89175129</p></td>
<td><p>Riesgo bajo</p></td>
<td><p>Zonas urbanas continuas</p></td>
<td><p>Cono aluvial rio Melendez</p></td>
<td><p>0.0</p></td>
<td><p>17.9</p></td>
<td><p>22.3</p></td>
<td><p>41.1</p></td>
<td><p>70.2</p></td>
<td><p>249.0</p></td>
<td><p>363.0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>1062.026245</p></td>
<td><p>9.081903458</p></td>
<td><p>Amenaza baja</p></td>
<td><p>Bosque mixto fragmentado con pastos y cultivos</p></td>
<td><p>Cono aluvial 1 rio Pance</p></td>
<td><p>0.0</p></td>
<td><p>48.1</p></td>
<td><p>88.6</p></td>
<td><p>163.4</p></td>
<td><p>304.6</p></td>
<td><p>533.0</p></td>
<td><p>722.6</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>1184.547241</p></td>
<td><p>27.58821106</p></td>
<td><p>Riesgo bajo</p></td>
<td><p>Zonas urbanas continuas</p></td>
<td><p>Formacion Volcanica</p></td>
<td><p>0.0</p></td>
<td><p>0.0</p></td>
<td><p>1.0</p></td>
<td><p>47.0</p></td>
<td><p>47.0</p></td>
<td><p>99.0</p></td>
<td><p>170.0</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
</div>
<br>
</section>
<section id="metodologia">
<h2>Metodolog√≠a<a class="headerlink" href="#metodologia" title="Link to this heading">#</a></h2>
<section id="modelos">
<h3>Modelos<a class="headerlink" href="#modelos" title="Link to this heading">#</a></h3>
<p>Dentro de los modelos de aprendizaje autom√°tico para problemas de clasificaci√≥n, se ejecutar√°n pruebas de rendimiento para modelos de ensamble como lo son Random Forest y XGBoost, para modelos basados en el hiperplano como el SVM (support vector machines), y modelos de regresi√≥n para clasificaci√≥n como lo es la regresi√≥n log√≠stica</p>
<ul class="simple">
<li><p>Bosques Aleatorios (Random Forest)</p></li>
<li><p>XGBoost (Extreme Gradient Boosting Trees)</p></li>
<li><p>Rgresi√≥n Log√≠stica</p></li>
<li><p>M√°quinas de Vectores de Soporte (SVM)</p></li>
</ul>
</section>
<section id="esquema-de-entrenamiento">
<h3>Esquema de entrenamiento<a class="headerlink" href="#esquema-de-entrenamiento" title="Link to this heading">#</a></h3>
<p>Ahora, la idea es lograr desarrollar una <strong>tuber√≠a de datos</strong> tal que cuando lleguen los datos nuevos a estimar, estos pasen por las mismas transformaciones por las que pasaron los datos de entrenamiento. M√°s precisamente hablando, <code class="docutils literal notranslate"><span class="pre">pipeline</span></code> en <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code> es una herramienta que te permite concatenar varios pasos de procesamiento de datos y modelado en un solo objeto. Esto facilita la construcci√≥n, entrenamiento y evaluaci√≥n de modelos de aprendizaje autom√°tico, ya que puedes encapsular todo el flujo de trabajo en una √∫nica estructura.</p>
<p><img alt="Sci-kit Learn Pipeline" src="_images/pipeline-scikitlearn.png" /></p>
<p>De la misma manera, se busca optimizar las estimaciones y la calidad de los modelos, por lo que se usa la metodolog√≠a de <strong>Grid search</strong> o <strong>b√∫squeda de malla</strong> para optimizar par√°metros dentro de los modelos. Es una herramienta poderosa para optimizar los par√°metros de un modelo de aprendizaje autom√°tico. Permite definir una cuadr√≠cula de valores para diferentes par√°metros del modelo y busca exhaustivamente la mejor combinaci√≥n de estos parameros, a lo que se le llama hiperparametrizacion.</p>
<p>En t√©rminos m√°s simples, el <code class="docutils literal notranslate"><span class="pre">GridSearchCV</span></code> realiza una b√∫squeda exhaustiva sobre una cuadr√≠cula de valores especificados para los hiperpar√°metros de un estimador. Esto permite encontrar la combinaci√≥n √≥ptima de hiperpar√°metros que maximiza la precisi√≥n o cualquier otra m√©trica de evaluaci√≥n definida.</p>
<p>La idea detr√°s del GridSearchCV es que, en lugar de ajustar manualmente los hiperpar√°metros del modelo y evaluar su rendimiento, el proceso se automatiza y se realiza de manera sistem√°tica. Esto ahorra tiempo y esfuerzo, ya que el GridSearchCV eval√∫a todas las combinaciones posibles de los hiperpar√°metros dentro de la cuadr√≠cula especificada y selecciona la mejor combinaci√≥n seg√∫n la m√©trica de evaluaci√≥n especificada.</p>
<p><img alt="Grid-Search" src="_images/Grid_serach.png" /></p>
<p>Tercero, se propone usar <strong>validaci√≥n cruzada aleatoria y dividida</strong>. Esto con el proposito de no usar la clasica division unitaria de entrenamiento-pruba, ya que en este tipo de divisi√≥n el entrenamiento o aprendizaje puede quedar sesgado debido a que al dividir aleatoriamente no sabemos con qu√© proporci√≥n de los datos el modelo aprende, por ejemplo, al dividir una sola vez el conjunto de datos nos puede quedar que en el conjunto de test solo haya valores con el label de 0 (no deslizamiento en este caso) y en el entrenamiento solo existan registros del label 1 (deslizamientos), esto puede ocasionar que el modelo no aprenda de la manera m√°s optima.</p>
<p>Con la validaci√≥n cruzada aleatoria y dividida (<code class="docutils literal notranslate"><span class="pre">shuffle-split</span></code>), cada divisi√≥n (split) est√° compuesta de tanto train_size puntos (disyuntos) para el conjunto de entrenamiento y tantos test_size puntos (disjuntos) para el conjunto de prueba, se fijen inicialmente. Esta divisi√≥n se repite n veces, de forma aleatoria. Por ejemplo en la siguiente imagen, para la ejecuci√≥n de 4 iteraciones de divisi√≥n de un conjunto de datos que consta de 50 puntos, con una fracci√≥n de conjunto de entrenamiento de 0.8 y una fracci√≥n de conjunto de prueba de 0.2 puntos cada uno. Esto no debe ser necesariamente igual a la fraccion completa, podemos usar un <code class="docutils literal notranslate"><span class="pre">train_size</span></code> de 0.5 y un <code class="docutils literal notranslate"><span class="pre">test_size</span></code> de 0.1, quiere decir que habr√°n puntos disyuntos que no tomara para entrenarse ni para testear.</p>
<p><img alt="Shuffle-split" src="_images/shufflesplit_diagram.png" /></p>
</section>
<section id="metrica-de-evaluacion">
<h3>M√©trica de evaluaci√≥n<a class="headerlink" href="#metrica-de-evaluacion" title="Link to this heading">#</a></h3>
<p>En el desarrollo de nuestros modelos de clasificaci√≥n binaria para la identificaci√≥n de zonas propensas a deslizamientos de tierra, enfrentamos una decisi√≥n crucial en la selecci√≥n de la m√©trica de rendimiento a optimizar. La esencia de nuestra clasificaci√≥n distingue dos categor√≠as claves: la clase positiva (1), que indica la presencia de un deslizamiento de tierra, y la clase negativa (0), que se√±ala su ausencia.</p>
<p><img alt="metrics-classification" src="_images/matriz_confusion_ejemplo.png" /></p>
<p>Si vemos la anterior matriz de confusi√≥n, para nuestro an√°lisis es vital priorizar la reducci√≥n de los falsos positivos (FP - false positives), es decir, las situaciones donde el modelo predice err√≥neamente que habr√° deslizamiento de tierra cuando en realidad no ocurre. La ocurrencia de estos errores podr√≠a tener consecuencias significativas en t√©rminos de seguridad y preparaci√≥n ante desastres naturales ya que en el contexto de este problema es costoso actuar sobre un falso positivo ya que se cuenta recursos limitados para manejar casos positivos, es decir, recursos limitados para manejar desastres de deslizamientos de tierra que hay que saber administrar.</p>
<p>En este mismo orden de ideas, queremos entonces limitar el n√∫mero de falsos positivos, por lo que entonces nos conviene maximizar la <code class="docutils literal notranslate"><span class="pre">precision</span></code> en la fase de entrenamiento</p>
<p><strong>Precision</strong> mide cu√°ntas de las muestras predichas como positivas son realmente positivas, es decir, precision intenta responder a la siguiente pregunta: ¬øqu√© proporci√≥n de identificaciones positivas fue correcta?</p>
<div class="math notranslate nohighlight">
\[ \text{Precision} = \frac{TP}{TP + FP} \]</div>
<p>Precision se utiliza como m√©trica de rendimiento cuando el objetivo es limitar el n√∫mero de falsos positivos</p>
</section>
<section id="calibradores-de-probabilidad">
<h3>Calibradores de probabilidad<a class="headerlink" href="#calibradores-de-probabilidad" title="Link to this heading">#</a></h3>
<p>Por √∫ltimo, se busca indagar si a cada clasificador le es necesario la implementaci√≥n de la <strong>calibraci√≥n de probabilidades</strong> o no, la calibraci√≥n de probabilidades se utiliza para ajustar las probabilidades predichas por un modelo de clasificaci√≥n para que reflejen mejor las probabilidades reales observadas. En un problema de clasificaci√≥n binaria, como lo es el actual, el modelo no solo estima qu√© clase es la m√°s probable, sino tambi√©n asgina una probabilidad asociada a dicha estimaci√≥n.</p>
<p>Para que un clasificador probabil√≠stico est√© bien calibrado, la confianza asociada a cada predicci√≥n de clase debe reflejar la probabilidad real de que la etiqueta generada sea la correcta. Aterrizando un poco la idea, los clasificadores bien calibrados son aquellos en los que la salida del m√©todo <code class="docutils literal notranslate"><span class="pre">predict_proba</span></code> se puede interpretar directamente como un nivel de confianza. Por ejemplo, un clasificador bien calibrado (binario) debe clasificar las muestras de tal manera que, entre las muestras a las que asign√≥ un valor de <code class="docutils literal notranslate"><span class="pre">predict_proba</span></code> cercano a, digamos 0.8, aproximadamente el 80% pertenezca efectivamente a la clase positiva, es decir, para que un clasificador probabil√≠stico est√© bien calibrado, la confianza asociada a cada predicci√≥n de clase debe reflejar la probabilidad real de que la etiqueta generada sea la correcta.</p>
<p>Lo vemos expresado matem√°ticamente de esta manera:</p>
<div class="math notranslate nohighlight">
\[
P(\hat{Y} = Y \mid \hat{P} = p) = p, \ \forall p \in [0, 1]
\]</div>
<p>Esta formula indica que  indica que un modelo de clasificaci√≥n est√° bien calibrado cuando la probabilidad predicha
<span class="math notranslate nohighlight">\( \hat{P} = p \)</span> corresponde exactamente con la probabilidad real de que la clase predicha <span class="math notranslate nohighlight">\( \hat{Y} \)</span> sea correcta (es decir, igual a ùëå, la clase verdadera).</p>
</section>
<section id="medidas-para-evaluar-calibracion">
<h3>Medidas para evaluar calibraci√≥n<a class="headerlink" href="#medidas-para-evaluar-calibracion" title="Link to this heading">#</a></h3>
<section id="calibration-curves">
<h4>Calibration curves<a class="headerlink" href="#calibration-curves" title="Link to this heading">#</a></h4>
<p>Existen diferentes m√©todos o herramientas por los cuales se puede probar si un clasificador est√° bien calibrado. Primero, se utilizar√° las ‚Äú<strong>Calibration curves</strong>‚Äù o diagramas de fiabilidad, estos miden qu√© tan bien est√°n calibradas las predicciones probabil√≠sticas de un clasificador. Comparan las probabilidades predichas por un clasificador con las frecuencias observadas de los eventos reales.</p>
<p>En la siguiente gr√°fica de ejemplo, podemos ver el eje X (<code class="docutils literal notranslate"><span class="pre">Mean</span> <span class="pre">predicted</span> <span class="pre">value</span></code>) representa las probabilidades predichas por los modelos, va de 0 a 1, indicando la confianza con la que los modelos predicen la clase positiva. Respecto al eje Y (<code class="docutils literal notranslate"><span class="pre">Fraction</span> <span class="pre">of</span> <span class="pre">positives</span></code>)  muestra la fracci√≥n de positivos reales, es decir, la proporci√≥n de veces que un evento predicho como probable en realidad ocurre en el conjunto de datos.</p>
<p>Todas las series ser√°n comparadas con una l√≠nea que representa el caso de calibraci√≥n perfecta. Si un modelo est√° perfectamente calibrado, los puntos de su curva se alinear√°n con esta diagonal, indicando que las probabilidades predichas coinciden con las frecuencias observadas de los eventos reales. Por ejemplo, una predicci√≥n de 0.6 significar√≠a que en el 60% de los casos ese evento ocurre realmente. Entonces si nos enfocamos por ejemplo en el modelo de regresi√≥n log√≠stica (curva azul), la curva azul est√° bastante cerca de la l√≠nea de calibraci√≥n perfecta. Esto indica que las probabilidades predichas por la regresi√≥n log√≠stica est√°n bastante bien calibradas. Para cualquier probabilidad predicha, la fracci√≥n de positivos observados es similar, lo que significa que este modelo tiene buenas predicciones calibradas.</p>
<p><img alt="calibration-curves" src="_images/calibration-curves.png" /></p>
</section>
<section id="brier-score-y-log-loss">
<h4>Brier score y Log Loss<a class="headerlink" href="#brier-score-y-log-loss" title="Link to this heading">#</a></h4>
<p>Por otro lado, otro m√©todo o herramienta para probar si un clasificador est√° bien calibrado, son los indicadores de <strong>Brier score</strong> y <strong>Log Loss</strong>. Cuando se trata de evaluar qu√© tan bien calibrado est√° un modelo, es importante utilizar m√©tricas que cuantifiquen la calidad de las probabilidades predichas, ambas m√©tricas penalizan las probabilidades incorrectas y ofrecen una medida de qu√© tan ajustadas est√°n las probabilidades predichas con las clases reales.</p>
<p>El <strong>Brier Score</strong> es una m√©trica que mide la precisi√≥n de las probabilidades predichas por un clasificador. Eval√∫a cu√°n cercanas est√°n las probabilidades predichas a las etiquetas verdaderas, lo que lo convierte en una herramienta √∫til para verificar la calibraci√≥n. Se define como el error cuadr√°tico medio entre las probabilidades predichas y las clases verdaderas. Matem√°ticamente, es:</p>
<div class="math notranslate nohighlight">
\[
\text{Brier Score} = \frac{1}{N} \sum_{i=1}^{N} (p_i - y_i)^2
\]</div>
<p>Donde:</p>
<ul class="simple">
<li><p>( N ) es el n√∫mero de muestras.</p></li>
<li><p>( p_i ) es la probabilidad predicha para la muestra ( i ).</p></li>
<li><p>( y_i ) es la etiqueta verdadera para la muestra ( i ) (1 si es positiva y 0 si es negativa).</p></li>
</ul>
<p>Interpretaci√≥n:</p>
<ul class="simple">
<li><p><strong>Un Brier Score de 0</strong> indica una predicci√≥n perfecta, donde las probabilidades predichas coinciden exactamente con las clases reales.</p></li>
<li><p><strong>Un Brier Score de 1</strong> es el peor resultado posible, ya que indica una discrepancia completa entre las probabilidades predichas y las etiquetas reales.</p></li>
<li><p>En general, <strong>cuanto menor sea el Brier Score, mejor calibrado estar√° el clasificador</strong>.</p></li>
</ul>
<p>El <strong>Log Loss</strong>, tambi√©n conocido como entrop√≠a cruzada, es otra m√©trica importante para evaluar la calibraci√≥n. Mientras que el Brier Score mide el error cuadr√°tico entre las probabilidades y las etiquetas, el <strong>Log Loss</strong> se enfoca en penalizar fuertemente las predicciones con <strong>alta confianza pero incorrectas</strong>, mientras m√°s cercana sea la probabilidad predicha a 0 o 1 para la clase correcta, menor ser√° el log loss. Se define como:</p>
<div class="math notranslate nohighlight">
\[
\text{Log Loss} = - \frac{1}{N} \sum_{i=1}^{N} \left[ y_i \log(p_i) + (1 - y_i) \log(1 - p_i) \right]
\]</div>
<p>Donde:</p>
<ul class="simple">
<li><p>( N ) es el n√∫mero total de muestras.</p></li>
<li><p>( y_i ) es la etiqueta verdadera para la muestra ( i ), 1 para la clase positiva y 0 para la clase negativa.</p></li>
<li><p>( p_i ) es la probabilidad predicha de la clase positiva para la muestra ( i ).</p></li>
</ul>
<p>Interpretaci√≥n:</p>
<ul class="simple">
<li><p>El <strong>Log Loss es siempre positivo</strong>, y <strong>cuanto menor sea, mejor calibrado est√° el modelo</strong>.</p></li>
<li><p>El <strong>Log Loss castiga fuertemente</strong> las predicciones que tienen alta confianza pero son incorrectas. Por ejemplo, si el clasificador predice una probabilidad de 0.99 para la clase positiva, pero la etiqueta real es 0, el error ser√° considerablemente mayor que si la predicci√≥n fuera de 0.6.</p></li>
</ul>
</section>
<section id="expected-calibration-error-ece">
<h4>Expected Calibration Error (ECE)<a class="headerlink" href="#expected-calibration-error-ece" title="Link to this heading">#</a></h4>
<p>Por √∫ltimo, el Expected Calibration Error (ECE) es una m√©trica utilizada para evaluar la calibraci√≥n de un modelo de clasificaci√≥n, especialmente en modelos de aprendizaje autom√°tico probabil√≠stico.  El ECE eval√∫a la diferencia promedio entre las probabilidades predichas y la frecuencia real de los eventos en una serie de intervalos (bins) de probabilidad.</p>
<p>Un ECE bajo indica que el modelo est√° bien calibrado, es decir, las probabilidades predichas son confiables. Un valor alto de ECE sugiere que el modelo es ‚Äúoverconfident‚Äù (predice probabilidades m√°s altas de las correctas) o ‚Äúunderconfident‚Äù (predice probabilidades m√°s bajas).</p>
<p>Para calcular el Expected Calibration Error (ECE), las predicciones de probabilidad se dividen en intervalos (o <em>bins</em>). Luego, se compara la precisi√≥n promedio de cada bin con la probabilidad promedio predicha de ese bin. La f√≥rmula es:</p>
<div class="math notranslate nohighlight">
\[
\text{ECE} = \sum_{i=1}^{B} \frac{|B_i|}{n} \cdot |\text{acc}(B_i) - \text{conf}(B_i)|
\]</div>
<p>donde:</p>
<ul class="simple">
<li><p>( B )  es el n√∫mero de intervalos.</p></li>
<li><p>( B_i ) es el conjunto de ejemplos en el bin ( i ).</p></li>
<li><p>( |B_i| ) es el n√∫mero de ejemplos en el bin ( i ).</p></li>
<li><p>( n ) es el total de ejemplos.</p></li>
<li><p>( acc(B_i) ) es la precisi√≥n de los ejemplos en el bin ( i ).</p></li>
<li><p>( conf(B_i) ) es la confianza promedio (o probabilidad promedio predicha) en el bin ( i ).</p></li>
</ul>
<p>Se expresa entre 0 y 1 y se podr√≠a interpretar de esta manera:</p>
<ul class="simple">
<li><p>ECE entre 0 y 0.1 (0% a 10%): Generalmente se considera que el modelo est√° bien calibrado. Las predicciones de probabilidad son bastante confiables.</p></li>
<li><p>ECE entre 0.1 y 0.3 (10% a 30%): El modelo tiene una calibraci√≥n moderada. Puede ser necesario ajustar el modelo o aplicar t√©cnicas de calibraci√≥n.</p></li>
<li><p>ECE por encima de 0.3 (30%): Se considera una mala calibraci√≥n. Las probabilidades predichas no reflejan adecuadamente las verdaderas frecuencias de las clases, y el modelo puede requerir una reevaluaci√≥n o recalibraci√≥n significativa.</p></li>
</ul>
<p>Estos ser√°n los m√©todos que se utilizar√°n en este proyecto para saber si un modelo de clasificaci√≥n est√° bien calibrado o no.</p>
</section>
</section>
<section id="metodos-de-calibracion">
<h3>M√©todos de Calibraci√≥n<a class="headerlink" href="#metodos-de-calibracion" title="Link to this heading">#</a></h3>
<p>Una vez validadas las m√©tricas previamente descritas, de acuerdo a estas se determinar√° si el modelo requiere calibraci√≥n. En caso de ser as√≠, se aplicar√°n m√©todos de calibraci√≥n en el post-procesamiento, lo cual significa que se ajusta un modelo de calibraci√≥n a las salidas de un clasificador ya entrenado con el fin de mejorar la distribucion de las probabilidades de la clase positiva, esto es, la confianza de sus probabilidades. Estos m√©todos son ventajosos porque implican un menor costo computacional en comparaci√≥n con los m√©todos de calibraci√≥n aplicados durante el entrenamiento. Adem√°s, son independientes del modelo entrenado y de la complejidad del problema, ya que solo requieren las predicciones del modelo y la distribuci√≥n real de etiquetas.</p>
<p>Estos m√©todos requieren utilizar las <strong>puntuaciones</strong> del clasificador entrenado junto con el conjunto de datos de calibraci√≥n. Por puntuaciones se entiende que estas indican la confianza en sus predicciones de arroja cada clasificador, pero estas puntuaciones no necesariamente se interpretan como probabilidades v√°lidas para interpretar (por ejemplo, en un SVM, estas puntuaciones pueden ser la distancia al hiperplano de decisi√≥n).</p>
<p>El objetivo de estos m√©todos es estimar o calibrar la probabilidad de la clase positiva (etiquetada en este caso como 1) a partir de las puntuaciones del clasificador entrenado y un conjunto de datos etiquetados que contenga ejemplos para calibrar las salidas del modelo (conjunto de datos de calibraci√≥n) por medio de diferentes t√©cnicas, como las siguientes que usaremos en este estudio:</p>
<ul class="simple">
<li><p><strong>Platt Scaling (Ajuste Sigmoidal o Log√≠stico)</strong></p></li>
</ul>
<p>Platt (1999) propone un m√©todo  para calibrar las probabilidades de salida de un clasificador, especialmente aquellos que producen puntuaciones no calibradas, como los modelos de SVM. Este m√©todo ajusta las probabilidades de predicci√≥n de un modelo ya entrenado (puntuaciones) mediante la utilizaci√≥n de una regresi√≥n log√≠stica haciendo uso de una funci√≥n sigmoidal.</p>
<p>El modelo de regresi√≥n log√≠stica es una forma de modelar la relaci√≥n entre las puntuaciones del clasificador y la probabilidad de que una observaci√≥n pertenezca a la clase positiva. La forma funcional de la regresi√≥n log√≠stica es:</p>
<div class="math notranslate nohighlight">
\[ P(y=1 \mid x) = \sigma(Ax + B) \]</div>
<p>donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\sigma(z) = \frac{1}{1 + e^{-z}}\)</span> es la funci√≥n sigmoide</p></li>
<li><p><span class="math notranslate nohighlight">\(x\)</span> son las puntuaciones del clasificador</p></li>
<li><p><span class="math notranslate nohighlight">\(A\)</span> y <span class="math notranslate nohighlight">\(B\)</span> son los par√°metros que se ajustan a partir de los datos.</p></li>
</ul>
<p>Para hacer el ajuste de las puntuaciones del modelo y convertirlas en probabilidades calibradas, se utilizan las puntuaciones  del clasificador como las variables independientes <span class="math notranslate nohighlight">\(x\)</span> y las etiquetas reales del conjunto de calibraci√≥n (0 o 1) como las variables dependiente <span class="math notranslate nohighlight">\(y\)</span>. El objetivo es encontrar los mejores par√°metros <span class="math notranslate nohighlight">\(A\)</span> y <span class="math notranslate nohighlight">\(B\)</span> que minimicen la discrepancia entre las probabilidades predichas por el modelo de regresi√≥n log√≠stica y las verdaderas etiquetas de clase. La funci√≥n de costo com√∫nmente utilizada es la log-verosimilitud, que se maximiza durante el entrenamiento de la regresi√≥n log√≠stica.</p>
<p>La idea es que este proceso asegure que el modelo de regresi√≥n log√≠stica capte la relaci√≥n entre las puntuaciones del clasificador y la probabilidad real de las clases.</p>
<ul class="simple">
<li><p><strong>Calibraci√≥n Beta</strong></p></li>
</ul>
<p>Kull et al. (2017) proponen un m√©todo para calibrar las probabilidades de salida de un clasificador basado en la distribuci√≥n beta, especialmente √∫til para clasificadores cuyos puntajes no est√°n calibrados, como Naive Bayes, Adaboost (Boosted Trees) o SVM. Este m√©todo ajusta las probabilidades de predicci√≥n mediante una familia param√©trica m√°s rica que la calibraci√≥n log√≠stica, capturando patrones no lineales o asim√©tricos en las distribuciones de puntajes.</p>
<p>La calibraci√≥n beta utiliza la siguiente funci√≥n para modelar la relaci√≥n entre los puntajes de salida s  y las probabilidades calibradas:</p>
<div class="math notranslate nohighlight">
\[
\mu_{\text{beta}}(s; a, b, c) = \frac{1}{1 + \frac{1}{e^{c} s^{a} (1-s)^{b}}}
\]</div>
<p>Donde
a,‚Äàb‚Äà‚â•0 : son los par√°metros de forma y c controla el desplazamiento (pendiente)</p>
<p>Esta funci√≥n se basa en el cociente de dos distribuciones beta, lo que permite ajustar probabilidades dentro del rango [0, 1]. El ajuste de a, b y c se realiza minimizando la p√©rdida logar√≠tmica (log-loss) mediante m√©todos de optimizaci√≥n basados en gradientes.</p>
<p>Para ajustar las probabilidades del modelo, se toman los puntajes del clasificador s como entrada, los par√°metros a, b y c se optimizan utilizando un conjunto de datos de calibraci√≥n con etiquetas reales y , por √∫ltimo, se asegura que la funci√≥n sea mon√≥tona, corrigiendo cualquier par√°metro negativo si fuera necesario.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Posible Redundancia</strong></p>
<p>Para la implementaci√≥n del modelo regresi√≥n log√≠stica, este suele producir probabilidades calibradas de manera natural, ya que est√° dise√±ado para ajustar una probabilidad de pertenencia a la clase positiva basada en los datos de entrenamiento. La salida de un modelo de regresi√≥n log√≠stica ya se interpreta de por si como una probabilidad entre 0 y 1, ya que el modelo aplica una transformaci√≥n sigmoide a su salida lineal.</p>
<p>Sin embargo, en algunos casos, es posible que las probabilidades de un modelo de regresi√≥n log√≠stica no est√©n perfectamente calibradas. Esto puede suceder si:</p>
<ul class="simple">
<li><p>Los datos est√°n desbalanceados: Si tienes clases con distribuciones muy desiguales, la regresi√≥n log√≠stica puede producir probabilidades que no reflejan fielmente la distribuci√≥n real de clases.</p></li>
<li><p>El modelo est√° regularizado: En algunos casos, el uso de regularizaci√≥n (como Ridge o Lasso) puede sesgar un poco las probabilidades, especialmente si la regularizaci√≥n es fuerte.</p></li>
<li><p>Distribuci√≥n de datos en validaci√≥n diferente a la de entrenamiento: Si la distribuci√≥n de los datos en el conjunto de validaci√≥n o prueba es distinta a la de entrenamiento, las probabilidades pueden perder calibraci√≥n.</p></li>
</ul>
<p>Para verificar la calibraci√≥n de la salida de un modelo de regresi√≥n log√≠stica, se evaluaran las m√©tricas de calibraci√≥n mencionadas anteriormente y se tomar√°n las decisiones pertinentes</p>
</div>
<br>
</section>
</section>
<section id="tabla-de-contenidos">
<h2><strong>Tabla de contenidos</strong><a class="headerlink" href="#tabla-de-contenidos" title="Link to this heading">#</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="eda.html">An√°lisis Exploratorio de datos</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementacion-randomforest.html">Implementaci√≥n 1: Modelo RandomForest</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementacion-xgboost.html">Implementaci√≥n 2: Gradient Boosted Trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementacion-logisticR.html">Implementaci√≥n 3: Modelo Logistic Regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementacion-svc.html">Implementaci√≥n 4: Modelo Support Vector Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="calibracion.html">Calibraci√≥n de clasificadores</a></li>
<li class="toctree-l1"><a class="reference internal" href="despliegue_modelo.html">Datos de estaciones en linea- Precipitaciones de lluvia acumulada</a></li>
</ul>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="right-next"
       href="eda.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">An√°lisis Exploratorio de datos</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Contextualizaci√≥n de la Problem√°tica</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exploracion-de-modelos-de-clasificacion-e-implementacion-de-calibracion">Exploraci√≥n de modelos de clasificaci√≥n e implementaci√≥n de calibraci√≥n</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion">Introducci√≥n</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objetivos">Objetivos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#datos">Datos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#metodologia">Metodolog√≠a</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#modelos">Modelos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#esquema-de-entrenamiento">Esquema de entrenamiento</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metrica-de-evaluacion">M√©trica de evaluaci√≥n</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calibradores-de-probabilidad">Calibradores de probabilidad</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#medidas-para-evaluar-calibracion">Medidas para evaluar calibraci√≥n</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#calibration-curves">Calibration curves</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#brier-score-y-log-loss">Brier score y Log Loss</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#expected-calibration-error-ece">Expected Calibration Error (ECE)</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metodos-de-calibracion">M√©todos de Calibraci√≥n</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tabla-de-contenidos"><strong>Tabla de contenidos</strong></a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Simon Lopez Ramos
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      ¬© Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>