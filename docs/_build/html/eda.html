
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Análisis Exploratorio de datos &#8212; Informe</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'eda';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Implementación 1: Modelo RandomForest" href="implementacion-randomforest.html" />
    <link rel="prev" title="Contextualización de la Problemática" href="intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Informe - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Informe - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Contextualización de la Problemática
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Análisis Exploratorio de datos</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementacion-randomforest.html">Implementación 1: Modelo RandomForest</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementacion-xgboost.html">Implementación 2: Gradient Boosted Trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementacion-logisticR.html">Implementación 3: Modelo Logistic Regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementacion-svc.html">Implementación 4: Modelo Support Vector Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="calibracion.html">Calibración de clasificadores</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Feda.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/eda.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Análisis Exploratorio de datos</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importacion-de-librerias-y-creacion-de-funciones">Importación de librerias y creación de funciones</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-numericas">Variables Numéricas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-categoricas">Variables categóricas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#agrupaciones">Agrupaciones</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-cluster">Análisis Cluster</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arbol-de-decision">Árbol de Decisión</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#correlaciones-entre-variables-independientes">Correlaciones entre variables independientes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decisiones">Decisiones</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#por-que-utilizar-modelos-de-ml">¿Por qué utilizar Modelos de ML?</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="analisis-exploratorio-de-datos">
<h1>Análisis Exploratorio de datos<a class="headerlink" href="#analisis-exploratorio-de-datos" title="Link to this heading">#</a></h1>
<section id="importacion-de-librerias-y-creacion-de-funciones">
<h2>Importación de librerias y creación de funciones<a class="headerlink" href="#importacion-de-librerias-y-creacion-de-funciones" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importar las bibliotecas necesarias</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span><span class="p">,</span><span class="n">LabelEncoder</span>
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">KMeans</span>
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">AgglomerativeClustering</span>
<span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">DecisionTreeClassifier</span><span class="p">,</span> <span class="n">DecisionTreeRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">plot_tree</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">silhouette_score</span>
<span class="kn">import</span> <span class="nn">scipy.cluster.hierarchy</span> <span class="k">as</span> <span class="nn">sch</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">yellowbrick.cluster</span> <span class="kn">import</span> <span class="n">silhouette_visualizer</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cargar_csv</span><span class="p">(</span><span class="n">ruta_csv</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">ruta_csv</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">df</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;El archivo en la ruta </span><span class="si">{</span><span class="n">ruta_csv</span><span class="si">}</span><span class="s2"> no se encontró.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">pd</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">EmptyDataError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;El archivo CSV está vacío.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">pd</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">ParserError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error al analizar el archivo CSV.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ocurrió un error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">graficar_histograma</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">],</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Frecuencia&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Histograma de Frecuencia - Precipitación de lluvia acumulada en </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">crear_tabla_contingencia</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columna1</span><span class="p">,</span> <span class="n">columna2</span><span class="p">):</span>

    <span class="n">tabla_contingencia</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">columna1</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">columna2</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">tabla_contingencia</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">tabla_contingencia</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">tabla_contingencia</span><span class="o">=</span><span class="n">tabla_contingencia</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tabla_contingencia</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">=</span><span class="n">cargar_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">,</span><span class="s1">&#39;Data&#39;</span><span class="p">,</span><span class="s1">&#39;output&#39;</span><span class="p">,</span><span class="s1">&#39;train_data_1.csv&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ELEVACION</th>
      <th>PENDIENT</th>
      <th>zonificacion</th>
      <th>Nomenclatura_del_Suelo</th>
      <th>tipo_geologia</th>
      <th>24h</th>
      <th>7d</th>
      <th>10d</th>
      <th>15d</th>
      <th>30d</th>
      <th>60d</th>
      <th>90d</th>
      <th>deslizamientos</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1030.110840</td>
      <td>21.268663</td>
      <td>Riesgo medio</td>
      <td>Zonas urbanas continuas</td>
      <td>Formacion Volcanica</td>
      <td>14.0</td>
      <td>197.0</td>
      <td>210.0</td>
      <td>366.0</td>
      <td>583.0</td>
      <td>746.0</td>
      <td>908.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1176.433594</td>
      <td>56.848099</td>
      <td>Riesgo alto</td>
      <td>Zonas urbanas continuas</td>
      <td>Formacion Guachinte</td>
      <td>7.6</td>
      <td>83.5</td>
      <td>110.0</td>
      <td>213.5</td>
      <td>343.7</td>
      <td>452.1</td>
      <td>531.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1038.540527</td>
      <td>32.060978</td>
      <td>Riesgo bajo</td>
      <td>Zonas urbanas continuas</td>
      <td>Formacion Guachinte</td>
      <td>9.5</td>
      <td>91.2</td>
      <td>117.0</td>
      <td>215.4</td>
      <td>266.2</td>
      <td>331.3</td>
      <td>434.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1657.118408</td>
      <td>47.167477</td>
      <td>Amenaza baja</td>
      <td>Bosque mixto abierto alto de tierra firme</td>
      <td>Formacion Volcanica</td>
      <td>0.0</td>
      <td>26.0</td>
      <td>42.0</td>
      <td>53.0</td>
      <td>93.0</td>
      <td>198.0</td>
      <td>293.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>980.576721</td>
      <td>20.477095</td>
      <td>Riesgo bajo</td>
      <td>Zonas urbanas continuas</td>
      <td>Formacion Guachinte</td>
      <td>11.0</td>
      <td>11.2</td>
      <td>12.3</td>
      <td>39.4</td>
      <td>43.9</td>
      <td>175.5</td>
      <td>323.0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="variables-numericas">
<h2>Variables Numéricas<a class="headerlink" href="#variables-numericas" title="Link to this heading">#</a></h2>
<p>Primeramente, es común en problema de clasificación revisar si se trata de un problema de clases desbalanceadas o no. El desbalanceo de clases ocurre cuando hay muchas más muestras de una clase que de otra. Por ejemplo en este caso, si nos interesa detectar deslizamientos de tierra y la mayoría de los registros reportan un no deslizamiento, puede ser difícil para un modelo de aprendizaje automático identificar los deslizamientos ya que tiene menos ejemplos para aprender de estas instancias. Por ende, es importante revisar esto al explorar los datos, para asegurarse de que el modelo pueda hacer predicciones precisas y útiles. Sin abordar este desbalanceo, el modelo podría no estimar nuevos datos correctamente.</p>
<p>Para esto haremos una revisión simple de cuantos registros hay para cada clase en la variable objetivo</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Grafica el histograma usando Seaborn.</span>
<span class="n">ax</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;deslizamientos&#39;</span><span class="p">)</span>

<span class="c1"># Añade etiquetas y título</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Valor&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Cantidad&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Histograma de cantidad de deslizamientos&#39;</span><span class="p">)</span>
<span class="c1"># Agrega los valores en las barras</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="n">p</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">get_height</span><span class="p">()),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s1">&#39;offset points&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/c4ff3838b2a361cfdd481d7c5ee56640937c6ba52dcf23e0d8dce576ee4f8a07.png" src="_images/c4ff3838b2a361cfdd481d7c5ee56640937c6ba52dcf23e0d8dce576ee4f8a07.png" />
</div>
</div>
<p>Donde 0 representa la clase negativa que es “No Deslizamiento de tierra” en punto geográfico
y 1 representa la clase positiva que es “Deslizamiento de tierra”</p>
<p>Esta es la lógica que seguiremos en las implementaciones.</p>
<p>Como podemos ver, no se presenta un problema grande de desbalance, ya que hay una relación de aproximadamente 40/60 de cada tipo de clase, por lo general se establece que hay desbalance de clases cuando hay una relación 10/90. Pero vemos que este no es el caso</p>
<p>Ahora vemos cómo se comportan las variables de precipitación de lluvia respecto la variable objetivo</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">columnas_a_graficar</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;24h&#39;</span><span class="p">,</span> <span class="s1">&#39;7d&#39;</span><span class="p">,</span> <span class="s1">&#39;10d&#39;</span><span class="p">,</span><span class="s1">&#39;15d&#39;</span><span class="p">,</span><span class="s1">&#39;30d&#39;</span><span class="p">,</span><span class="s1">&#39;60d&#39;</span><span class="p">,</span><span class="s1">&#39;90d&#39;</span><span class="p">]</span> 
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">columnas_a_graficar</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">n</span><span class="p">),</span> <span class="n">constrained_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span><span class="n">axes</span><span class="p">]</span>
<span class="k">for</span> <span class="n">columna</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">columnas_a_graficar</span><span class="p">,</span> <span class="n">axes</span><span class="p">):</span>
    <span class="n">graficar_histograma</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;deslizamientos&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">columna</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/b943593ab0e203ac01f050e16b37160ae1765db756c25ba7215523c03da99749.png" src="_images/b943593ab0e203ac01f050e16b37160ae1765db756c25ba7215523c03da99749.png" />
</div>
</div>
<p>En este caso vemos que para puntos donde ha habido deslizamientos de tierra, existe mayor cantidad de lluvia acumulada en mm en comparación con los que no han presentado deslizamientos. Esto nos sugiere que las variables de precipitación son importantes en la tendencia de la variable objetivo (deslizamientos o no)</p>
<p>También podremos pensar que al tratarse de variables que capturan data de manera acumulada, el valor o aporte que brinda una variable, tambien lo puede brindar en el mismo grado cualquier otra, pudiendo llegar a redundancias y posteriormente si se quiere evaluar modelos a “over-fitting”. Podemos revisar las correlaciones entre las variables de precipitaciones</p>
<p>Realizaremos un boxplot para comparar la distribución de las variables de precipitación para cada valor de la variable objetivo</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Configurar el tamaño de la figura y número de subplots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="c1"># Crear un boxplot para cada columna en la lista</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columnas_a_graficar</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>  <span class="c1"># Crear una cuadrícula de 2 filas y 4 columnas</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;deslizamientos&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">column</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Distribución de </span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s1"> por deslizamiento&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;deslizamiento&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>

<span class="c1"># Ajustar el espacio entre los subplots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/8958d0c602a637c3ce3f5d40c6e84267a2cdd2887b30b3e6211b484b776ef092.png" src="_images/8958d0c602a637c3ce3f5d40c6e84267a2cdd2887b30b3e6211b484b776ef092.png" />
</div>
</div>
<ul class="simple">
<li><p>Distribución de la Variable 10d para Cada Valor de deslizamiento: Las variables de precipitaciones poseen una distribución similar entre ellas, esto es, que claramente su distribución es distinta entre los valores de no deslizamiento y sí deslizamiento = 1. Para no deslizamiento, los valores son considerablemente más bajos, con una mediana cercana a los 25. La mayor parte de los datos están concentrados entre 0 y aproximadamente 50, y existen varios valores atípicos alrededor superiores al rango intercuartílico. Para los sí deslizamiento, los valores de precipitación son mucho más altos en promedio. La mediana está se encuentra superior a lo no deslizamientos, y el rango de los datos se extiende mucho más, alcanzando hasta alrededor de 250.</p></li>
<li><p>Variabilidad y Rango: Los datos de precipitaciones para deslizamiento = 1 muestran una variabilidad mucho mayor en comparación con deslizamiento = 0. Esto indica que cuando deslizamiento es igual a 1, las variables de precipitaciones tiende a tener valores más dispersos, y no está tan concentrada alrededor de un valor específico. Para deslizamiento = 0, la mayoría de los datos se encuentran en un rango más estrecho y con menor variabilidad, lo que sugiere que los eventos con deslizamiento = 0 están más limitados a valores bajos de precipitaciones.</p></li>
<li><p>Relación entre precipitaciones y deslizamiento: Esto podría interpretarse como que la condición de deslizamiento = 1 está asociada con situaciones o eventos donde las precipitaciones de lluvia es significativamente mayor, lo cual podría ser relevante en un contexto de riesgo, alertas o indicadores.</p></li>
</ul>
</section>
<section id="variables-categoricas">
<h2>Variables categóricas<a class="headerlink" href="#variables-categoricas" title="Link to this heading">#</a></h2>
<p>Ahora veamos las relaciones de las variables categoricas con el objetivo</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">columnas_comparar</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;zonificacion&#39;</span><span class="p">,</span><span class="s1">&#39;Nomenclatura_del_Suelo&#39;</span><span class="p">,</span><span class="s1">&#39;tipo_geologia&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">columnas_comparar</span><span class="p">:</span>
    <span class="n">tabla</span> <span class="o">=</span> <span class="n">crear_tabla_contingencia</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="s1">&#39;deslizamientos&#39;</span><span class="p">)</span>
    <span class="n">resultados</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">tabla</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados</span><span class="p">[</span><span class="s1">&#39;zonificacion&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>zonificacion</th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5</th>
      <td>Riesgo bajo</td>
      <td>206</td>
      <td>169</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Amenaza baja</td>
      <td>194</td>
      <td>15</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Amenaza alta</td>
      <td>0</td>
      <td>26</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Amenaza media</td>
      <td>0</td>
      <td>27</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Amenaza muy alta</td>
      <td>0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Riesgo alto</td>
      <td>0</td>
      <td>206</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Riesgo medio</td>
      <td>0</td>
      <td>104</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados</span><span class="p">[</span><span class="s1">&#39;Nomenclatura_del_Suelo&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Nomenclatura_del_Suelo</th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>25</th>
      <td>Zonas urbanas continuas</td>
      <td>98</td>
      <td>401</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Pasto cultivado arbolado</td>
      <td>50</td>
      <td>9</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Pasto cultivado</td>
      <td>38</td>
      <td>10</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Zonas urbanas discontinuas</td>
      <td>36</td>
      <td>25</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Bosque mixto denso bajo de tierra firme</td>
      <td>25</td>
      <td>9</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Pasto cultivado enmalezado</td>
      <td>20</td>
      <td>3</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Bosque mixto fragmentado con pastos y cultivos</td>
      <td>18</td>
      <td>0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Otras superficies artificiales con construcción</td>
      <td>15</td>
      <td>1</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Vegetación secundaria o transición</td>
      <td>14</td>
      <td>11</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Bosque mixto denso alto de tierra firme</td>
      <td>13</td>
      <td>14</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Arbustal y matorral abierto bajo de tierra firme</td>
      <td>12</td>
      <td>3</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Bosque mixto abierto alto de tierra firme</td>
      <td>10</td>
      <td>10</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Otras superficies artificiales sin construcción</td>
      <td>9</td>
      <td>34</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Bosque mixto abierto bajo de tierra firme</td>
      <td>9</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Bosque de guadua</td>
      <td>6</td>
      <td>0</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Ríos</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Arbustal y matorral abierto alto de tierra firme</td>
      <td>4</td>
      <td>0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Misceláneo de cultivos y espacios naturales</td>
      <td>4</td>
      <td>2</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Bosque mixto fragmentado con vegetación natural</td>
      <td>4</td>
      <td>3</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Otros cultivos arbustivos plantados abiertos</td>
      <td>2</td>
      <td>3</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Helechal</td>
      <td>2</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Arbustal y matorral denso alto de tierra firme</td>
      <td>2</td>
      <td>0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Otros cultivos arbóreos plantados densos</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Pino</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Arbustal y matorral denso bajo de tierra firme</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Misceláneo de pastos y cultivos</td>
      <td>1</td>
      <td>4</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Otras asociaciones de cultivos</td>
      <td>0</td>
      <td>5</td>
    </tr>
    <tr>
      <th>27</th>
      <td>Áreas naturales desnudas</td>
      <td>0</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados</span><span class="p">[</span><span class="s1">&#39;tipo_geologia&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>tipo_geologia</th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8</th>
      <td>Formacion Jamundi</td>
      <td>96</td>
      <td>3</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Lateritas Formacion Volcanica</td>
      <td>86</td>
      <td>113</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Formacion Volcanica</td>
      <td>84</td>
      <td>345</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Cono aluvial 2 rio Pance</td>
      <td>37</td>
      <td>1</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Cono aluvial 1 rio Pance</td>
      <td>28</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Cono aluvial rio Melendez</td>
      <td>20</td>
      <td>5</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Formacion Guachinte</td>
      <td>20</td>
      <td>79</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Formacion Ferreira</td>
      <td>15</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Depositos aluviales</td>
      <td>7</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Conos aluviales</td>
      <td>3</td>
      <td>1</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Derrubios</td>
      <td>2</td>
      <td>0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Stock de Pance – Gabro hornblendico</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Stock de Pance – Tonalita hornblendica biotitica</td>
      <td>1</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Las variables categóricas con muy pocas frecuencias pueden presentar varios desafíos y consideraciones, por ejemplo:</p>
<ul class="simple">
<li><p>Sobre-ajuste: Las categorías que aparecen solo unas pocas veces pueden llevar a modelos que se ajustan demasiado a esos casos específicos, capturando el ruido en lugar de patrones generales. Esto puede disminuir la capacidad de generalización del modelo a datos no vistos.</p></li>
<li><p>Estabilidad en el entrenamiento: Dado que el modelo tiene pocos ejemplos de estas categorías, puede ser difícil para el modelo aprender patrones representativos. Las categorías con baja frecuencia pueden no tener suficientes datos para permitir que el modelo aprenda características significativas, lo que puede llevar a una mala representación de esas categorías en el modelo.</p></li>
</ul>
<p>Todo esto puede afectar en las métricas de evaluación, como la precisión, el recall, y la F1-score, ya que el rendimiento en estas categorías raras puede no estar bien representado</p>
</section>
<section id="agrupaciones">
<h2>Agrupaciones<a class="headerlink" href="#agrupaciones" title="Link to this heading">#</a></h2>
<p>Agrupar los datos por la variable objetivo es util para entender las diferencias entre grupos, identificar relaciones con las variables predictoras, evaluar distribuciones y tendencias y facilitar la creación de estrategias de modelado</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cols_g</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;24h&#39;</span><span class="p">,</span> <span class="s1">&#39;15d&#39;</span><span class="p">,</span> <span class="s1">&#39;30d&#39;</span><span class="p">,</span> <span class="s1">&#39;60d&#39;</span><span class="p">,</span> <span class="s1">&#39;deslizamientos&#39;</span><span class="p">]</span>
<span class="n">df__</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">cols_g</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df__</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;deslizamientos&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">24h</th>
      <th colspan="3" halign="left">15d</th>
      <th colspan="3" halign="left">30d</th>
      <th colspan="3" halign="left">60d</th>
    </tr>
    <tr>
      <th></th>
      <th>sum</th>
      <th>mean</th>
      <th>count</th>
      <th>sum</th>
      <th>mean</th>
      <th>count</th>
      <th>sum</th>
      <th>mean</th>
      <th>count</th>
      <th>sum</th>
      <th>mean</th>
      <th>count</th>
    </tr>
    <tr>
      <th>deslizamientos</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>353.0</td>
      <td>0.882500</td>
      <td>400</td>
      <td>16423.0</td>
      <td>41.057500</td>
      <td>400</td>
      <td>33964.8</td>
      <td>84.912000</td>
      <td>400</td>
      <td>75263.5</td>
      <td>188.158750</td>
      <td>400</td>
    </tr>
    <tr>
      <th>1</th>
      <td>4348.8</td>
      <td>7.906909</td>
      <td>550</td>
      <td>102426.1</td>
      <td>186.229273</td>
      <td>550</td>
      <td>177402.0</td>
      <td>322.549091</td>
      <td>550</td>
      <td>249013.7</td>
      <td>452.752182</td>
      <td>550</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>La tabla muestra la acumulación de lluvia (en mm) en diferentes períodos de tiempo: 24 horas, 15 días, 30 días y 60 días, con las agrupaciones basadas en si hay deslizamientos de tierra (1) o no (0)</p>
<p>Claramente, los días con deslizamientos (1) tienen una acumulación de lluvia significativamente mayor que los días sin deslizamientos (0) en todos los intervalos de tiempo.</p>
<p>La diferencia es especialmente notable en los períodos de tiempo más largos (30 y 60 días), donde la acumulación de lluvia promedio en los días con deslizamientos es aproximadamente el doble o más que en los días sin deslizamientos, lo que sugiere que los deslizamientos están asociados a condiciones prolongadas de lluvia intensa.</p>
<section id="analisis-cluster">
<h3>Análisis Cluster<a class="headerlink" href="#analisis-cluster" title="Link to this heading">#</a></h3>
<p>En este análisis, se implementará un análisis de clustering como parte del análisis exploratorio para las variables predictoras. El objetivo principal será identificar y entender los perfiles ocultos que existen en los datos de entrenamiento, con el fin de extraer conclusiones valiosas sobre la estructura subyacente de las muestras.</p>
<p>Se utilizarán técnicas de clustering como K-Means para agrupar los datos en función de sus características, sin considerar la variable objetivo. Esto permitirá descubrir patrones, segmentaciones y grupos homogéneos que podrían ofrecer perspectivas adicionales, facilitando la comprensión del problema de clasificación y sugiriendo posibles mejoras en las estrategias de modelado predictivo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">independent_var_erase</span><span class="o">=</span><span class="p">[]</span> <span class="c1"># Eliminamos la variable de precipitacion acumulada a 10 dias</span>
<span class="n">dependent_var</span><span class="o">=</span><span class="s1">&#39;deslizamientos&#39;</span>
<span class="n">independent_var</span><span class="o">=</span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">independent_var_erase</span> <span class="ow">and</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dependent_var</span><span class="p">]</span>
<span class="n">X</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">independent_var</span><span class="p">]</span>
<span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">dependent_var</span><span class="p">]</span>
<span class="c1"># Seleccionar columnas categoricas</span>
<span class="n">VAR_categorical_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">cname</span> <span class="k">for</span> <span class="n">cname</span> <span class="ow">in</span> <span class="n">X</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">X</span><span class="p">[</span><span class="n">cname</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span> <span class="o">==</span> <span class="s2">&quot;object&quot;</span><span class="p">]</span>

<span class="c1"># Seleccionar columnas numericas</span>
<span class="n">VAR_numerical_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">cname</span> <span class="k">for</span> <span class="n">cname</span> <span class="ow">in</span> <span class="n">X</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">X</span><span class="p">[</span><span class="n">cname</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;int64&#39;</span><span class="p">,</span> <span class="s1">&#39;float64&#39;</span><span class="p">]]</span>

<span class="n">label_encoders</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">VAR_categorical_cols</span><span class="p">:</span>
    <span class="n">le</span> <span class="o">=</span> <span class="n">LabelEncoder</span><span class="p">()</span>
    <span class="n">X</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span> <span class="o">=</span> <span class="n">le</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">feature</span><span class="p">])</span>
    <span class="n">label_encoders</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span> <span class="o">=</span> <span class="n">le</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X_scaled</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">StandardScaler</span><span class="p">()</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X_scaled</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ELEVACION</th>
      <th>PENDIENT</th>
      <th>zonificacion</th>
      <th>Nomenclatura_del_Suelo</th>
      <th>tipo_geologia</th>
      <th>24h</th>
      <th>7d</th>
      <th>10d</th>
      <th>15d</th>
      <th>30d</th>
      <th>60d</th>
      <th>90d</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.566235</td>
      <td>-0.470035</td>
      <td>1.215925</td>
      <td>0.635991</td>
      <td>0.385252</td>
      <td>0.854159</td>
      <td>2.144217</td>
      <td>1.791373</td>
      <td>2.273389</td>
      <td>1.997366</td>
      <td>1.824370</td>
      <td>1.770709</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.105551</td>
      <td>1.203249</td>
      <td>0.118416</td>
      <td>0.635991</td>
      <td>-0.395942</td>
      <td>0.250162</td>
      <td>0.327085</td>
      <td>0.400193</td>
      <td>0.834211</td>
      <td>0.671545</td>
      <td>0.499336</td>
      <td>0.223749</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.527533</td>
      <td>0.037522</td>
      <td>0.667170</td>
      <td>0.635991</td>
      <td>-0.395942</td>
      <td>0.429474</td>
      <td>0.450362</td>
      <td>0.497575</td>
      <td>0.852142</td>
      <td>0.242164</td>
      <td>-0.045285</td>
      <td>-0.174275</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2.312436</td>
      <td>0.747974</td>
      <td>-1.527849</td>
      <td>-2.257647</td>
      <td>0.385252</td>
      <td>-0.467084</td>
      <td>-0.593488</td>
      <td>-0.545810</td>
      <td>-0.680465</td>
      <td>-0.717435</td>
      <td>-0.646261</td>
      <td>-0.752847</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-0.793653</td>
      <td>-0.507262</td>
      <td>0.667170</td>
      <td>0.635991</td>
      <td>-0.395942</td>
      <td>0.571035</td>
      <td>-0.830436</td>
      <td>-0.958990</td>
      <td>-0.808812</td>
      <td>-0.989469</td>
      <td>-0.747701</td>
      <td>-0.629747</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Escalamos el conjunto de datos para evitar el sesgo debido a escalas diferentes, mejorar la convergencia de K-Means y garantizar la consistencia en la métrica de distancia</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Inercia para el Método del Codo</span>
<span class="n">inertia</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1"># Coeficiente de Silueta</span>
<span class="n">silhouette_scores</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">n_clusters_range</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span> <span class="c1"># de 2 a 10 cluster</span>
<span class="n">clusters_dict</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">n_clusters_range</span><span class="p">:</span>
    <span class="n">kmeans</span> <span class="o">=</span> <span class="n">KMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="n">n</span><span class="p">,</span><span class="n">init</span><span class="o">=</span><span class="s1">&#39;k-means++&#39;</span><span class="p">)</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="n">kmeans</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">X_scaled</span><span class="p">)</span>
    <span class="n">inertia</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">kmeans</span><span class="o">.</span><span class="n">inertia_</span><span class="p">)</span>
    <span class="n">silhouette_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">silhouette_score</span><span class="p">(</span><span class="n">X_scaled</span><span class="p">,</span> <span class="n">labels</span><span class="p">))</span>

    <span class="c1"># Crear un DataFrame con los datos escalados y la columna &quot;clusters&quot;</span>
    <span class="n">df_with_clusters</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">df_with_clusters</span><span class="p">[</span><span class="s1">&#39;clusters&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">labels</span>

    <span class="c1"># Guardar en el diccionario con la clave como el número de clusters</span>
    <span class="n">clusters_dict</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;con_</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1">_clusters&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_with_clusters</span>

<span class="c1"># Graficar ambos</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Número de Clusters&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Inercia&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tab:blue&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">n_clusters_range</span><span class="p">,</span> <span class="n">inertia</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tab:blue&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Inercia&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="s1">&#39;tab:blue&#39;</span><span class="p">)</span>

<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>  <span class="c1"># Crear un segundo eje que comparte el eje x</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Coeficiente de Silueta&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tab:red&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">n_clusters_range</span><span class="p">,</span> <span class="n">silhouette_scores</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tab:red&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Coef. de Silueta&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="s1">&#39;tab:red&#39;</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Método del Codo e Índice de Silueta&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f6e5378481dbe1f6be7956a65d45caeb2c973d7efdf4a5dc61a1a9c09dcf2b17.png" src="_images/f6e5378481dbe1f6be7956a65d45caeb2c973d7efdf4a5dc61a1a9c09dcf2b17.png" />
</div>
</div>
<p>Utilizaremos el método del codo (<code class="docutils literal notranslate"><span class="pre">Inercia</span></code>) y el <code class="docutils literal notranslate"><span class="pre">Coeficiente</span> <span class="pre">de</span> <span class="pre">Silueta</span></code> para identificar el número de clusters más optimo.</p>
<p>Este método evalúa la suma de los errores cuadrados dentro de cada cluster (inertia) para diferentes valores de n_clusters. A medida que aumenta el número de clusters, la inercia disminuye, pero llega un punto en el que la mejora se vuelve marginal. El “codo” en la gráfica es el punto donde el incremento de clusters deja de ofrecer una mejora significativa.</p>
<p>El coeficiente de silueta mide la separación entre los clusters y qué tan bien están asignadas las muestras dentro de su propio cluster. Los valores del coeficiente de silueta están entre -1 y 1, donde un valor cercano a 1 indica que los puntos están bien agrupados.</p>
<p>En este mismo orden de las ideas, tenemos que encontrar ese número que nos indique el codo en la serie de la inercia (línea azul) y el coeficiente de silueta más alto en la serie de silueta (línea roja). Vemos que el punto que cumple con esta condición es el 7</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultado_cluster</span><span class="o">=</span><span class="n">clusters_dict</span><span class="p">[</span><span class="s1">&#39;con_7_clusters&#39;</span><span class="p">]</span>
<span class="n">resultado_cluster</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ELEVACION</th>
      <th>PENDIENT</th>
      <th>zonificacion</th>
      <th>Nomenclatura_del_Suelo</th>
      <th>tipo_geologia</th>
      <th>24h</th>
      <th>7d</th>
      <th>10d</th>
      <th>15d</th>
      <th>30d</th>
      <th>60d</th>
      <th>90d</th>
      <th>clusters</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1030.110840</td>
      <td>21.268663</td>
      <td>6</td>
      <td>25</td>
      <td>9</td>
      <td>14.0</td>
      <td>197.0</td>
      <td>210.0</td>
      <td>366.0</td>
      <td>583.0</td>
      <td>746.0</td>
      <td>908.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1176.433594</td>
      <td>56.848099</td>
      <td>4</td>
      <td>25</td>
      <td>7</td>
      <td>7.6</td>
      <td>83.5</td>
      <td>110.0</td>
      <td>213.5</td>
      <td>343.7</td>
      <td>452.1</td>
      <td>531.0</td>
      <td>4</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1038.540527</td>
      <td>32.060978</td>
      <td>5</td>
      <td>25</td>
      <td>7</td>
      <td>9.5</td>
      <td>91.2</td>
      <td>117.0</td>
      <td>215.4</td>
      <td>266.2</td>
      <td>331.3</td>
      <td>434.0</td>
      <td>4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1657.118408</td>
      <td>47.167477</td>
      <td>1</td>
      <td>5</td>
      <td>9</td>
      <td>0.0</td>
      <td>26.0</td>
      <td>42.0</td>
      <td>53.0</td>
      <td>93.0</td>
      <td>198.0</td>
      <td>293.0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>980.576721</td>
      <td>20.477095</td>
      <td>5</td>
      <td>25</td>
      <td>7</td>
      <td>11.0</td>
      <td>11.2</td>
      <td>12.3</td>
      <td>39.4</td>
      <td>43.9</td>
      <td>175.5</td>
      <td>323.0</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">funciones_agregacion</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">]</span>
<span class="n">agg_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">col</span><span class="p">:</span> <span class="n">funciones_agregacion</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">resultado_cluster</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s1">&#39;clusters&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col</span><span class="p">}</span>
<span class="n">resultado</span> <span class="o">=</span> <span class="n">resultado_cluster</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;clusters&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">agg_dict</span><span class="p">)</span>
<span class="n">resultado</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="5" halign="left">ELEVACION</th>
      <th colspan="5" halign="left">PENDIENT</th>
      <th>...</th>
      <th colspan="5" halign="left">60d</th>
      <th colspan="5" halign="left">90d</th>
    </tr>
    <tr>
      <th></th>
      <th>mean</th>
      <th>median</th>
      <th>count</th>
      <th>min</th>
      <th>max</th>
      <th>mean</th>
      <th>median</th>
      <th>count</th>
      <th>min</th>
      <th>max</th>
      <th>...</th>
      <th>mean</th>
      <th>median</th>
      <th>count</th>
      <th>min</th>
      <th>max</th>
      <th>mean</th>
      <th>median</th>
      <th>count</th>
      <th>min</th>
      <th>max</th>
    </tr>
    <tr>
      <th>clusters</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1081.343884</td>
      <td>1068.523682</td>
      <td>153</td>
      <td>985.792114</td>
      <td>1769.932861</td>
      <td>42.480770</td>
      <td>41.846062</td>
      <td>153</td>
      <td>3.538649</td>
      <td>89.237999</td>
      <td>...</td>
      <td>672.419608</td>
      <td>735.00</td>
      <td>153</td>
      <td>446.0</td>
      <td>753.0</td>
      <td>827.745098</td>
      <td>878.00</td>
      <td>153</td>
      <td>666.0</td>
      <td>918.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1109.291123</td>
      <td>1074.063721</td>
      <td>221</td>
      <td>979.047546</td>
      <td>1500.505249</td>
      <td>30.774787</td>
      <td>26.067751</td>
      <td>221</td>
      <td>2.509326</td>
      <td>84.404579</td>
      <td>...</td>
      <td>180.012217</td>
      <td>185.60</td>
      <td>221</td>
      <td>0.0</td>
      <td>484.8</td>
      <td>293.068326</td>
      <td>309.20</td>
      <td>221</td>
      <td>0.0</td>
      <td>706.8</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1705.272693</td>
      <td>1691.590942</td>
      <td>102</td>
      <td>1398.259766</td>
      <td>2098.276855</td>
      <td>35.632793</td>
      <td>28.213477</td>
      <td>102</td>
      <td>1.930219</td>
      <td>101.956207</td>
      <td>...</td>
      <td>246.046078</td>
      <td>266.80</td>
      <td>102</td>
      <td>23.0</td>
      <td>521.4</td>
      <td>378.537255</td>
      <td>364.00</td>
      <td>102</td>
      <td>103.0</td>
      <td>815.6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1046.853896</td>
      <td>1039.669922</td>
      <td>51</td>
      <td>984.869446</td>
      <td>1181.661743</td>
      <td>13.690300</td>
      <td>11.322103</td>
      <td>51</td>
      <td>3.015621</td>
      <td>40.761745</td>
      <td>...</td>
      <td>212.407843</td>
      <td>160.00</td>
      <td>51</td>
      <td>44.2</td>
      <td>538.0</td>
      <td>344.890196</td>
      <td>345.80</td>
      <td>51</td>
      <td>93.4</td>
      <td>722.6</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1087.131812</td>
      <td>1075.588318</td>
      <td>226</td>
      <td>975.132202</td>
      <td>1599.939087</td>
      <td>36.449945</td>
      <td>33.249146</td>
      <td>226</td>
      <td>1.330287</td>
      <td>94.294182</td>
      <td>...</td>
      <td>468.573009</td>
      <td>444.55</td>
      <td>226</td>
      <td>203.4</td>
      <td>848.0</td>
      <td>602.109735</td>
      <td>536.00</td>
      <td>226</td>
      <td>284.0</td>
      <td>984.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1014.184948</td>
      <td>979.652466</td>
      <td>48</td>
      <td>972.612610</td>
      <td>1300.178345</td>
      <td>11.900871</td>
      <td>9.840033</td>
      <td>48</td>
      <td>1.231035</td>
      <td>41.481342</td>
      <td>...</td>
      <td>168.733333</td>
      <td>128.75</td>
      <td>48</td>
      <td>17.4</td>
      <td>533.0</td>
      <td>297.070833</td>
      <td>308.35</td>
      <td>48</td>
      <td>44.0</td>
      <td>722.6</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1097.128918</td>
      <td>1079.523193</td>
      <td>149</td>
      <td>978.607788</td>
      <td>1488.616699</td>
      <td>21.862463</td>
      <td>17.751278</td>
      <td>149</td>
      <td>0.984309</td>
      <td>92.066528</td>
      <td>...</td>
      <td>212.671812</td>
      <td>208.80</td>
      <td>149</td>
      <td>24.7</td>
      <td>577.5</td>
      <td>367.104027</td>
      <td>353.90</td>
      <td>149</td>
      <td>62.7</td>
      <td>742.2</td>
    </tr>
  </tbody>
</table>
<p>7 rows × 60 columns</p>
</div></div></div>
</div>
<p>Vemos el perfil de la variable de lluvia acumulada en las ultimas 24h</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultado</span><span class="p">[</span><span class="s1">&#39;24h&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>median</th>
      <th>count</th>
      <th>min</th>
      <th>max</th>
    </tr>
    <tr>
      <th>clusters</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>6.282353</td>
      <td>10.0</td>
      <td>153</td>
      <td>0.0</td>
      <td>29.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.927149</td>
      <td>0.0</td>
      <td>221</td>
      <td>0.0</td>
      <td>20.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3.359804</td>
      <td>0.0</td>
      <td>102</td>
      <td>0.0</td>
      <td>47.6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.392157</td>
      <td>0.0</td>
      <td>51</td>
      <td>0.0</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>12.016372</td>
      <td>6.3</td>
      <td>226</td>
      <td>0.0</td>
      <td>108.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.841667</td>
      <td>0.0</td>
      <td>48</td>
      <td>0.0</td>
      <td>19.8</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1.314765</td>
      <td>0.0</td>
      <td>149</td>
      <td>0.0</td>
      <td>30.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Observamos que para el cluster 0, 2, 4 y 5 podría representar aquel grupo con niveles de lluvias acumuladas más bajos, mientras que los cluster numero 1, 3 y 6 con los mayores niveles al observar sus medidas de agrupación.</p>
<p>Ahora observemos la variable de <code class="docutils literal notranslate"><span class="pre">PENDIENT</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultado</span><span class="p">[</span><span class="s1">&#39;PENDIENT&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>median</th>
      <th>count</th>
      <th>min</th>
      <th>max</th>
    </tr>
    <tr>
      <th>clusters</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>42.480770</td>
      <td>41.846062</td>
      <td>153</td>
      <td>3.538649</td>
      <td>89.237999</td>
    </tr>
    <tr>
      <th>1</th>
      <td>30.774787</td>
      <td>26.067751</td>
      <td>221</td>
      <td>2.509326</td>
      <td>84.404579</td>
    </tr>
    <tr>
      <th>2</th>
      <td>35.632793</td>
      <td>28.213477</td>
      <td>102</td>
      <td>1.930219</td>
      <td>101.956207</td>
    </tr>
    <tr>
      <th>3</th>
      <td>13.690300</td>
      <td>11.322103</td>
      <td>51</td>
      <td>3.015621</td>
      <td>40.761745</td>
    </tr>
    <tr>
      <th>4</th>
      <td>36.449945</td>
      <td>33.249146</td>
      <td>226</td>
      <td>1.330287</td>
      <td>94.294182</td>
    </tr>
    <tr>
      <th>5</th>
      <td>11.900871</td>
      <td>9.840033</td>
      <td>48</td>
      <td>1.231035</td>
      <td>41.481342</td>
    </tr>
    <tr>
      <th>6</th>
      <td>21.862463</td>
      <td>17.751278</td>
      <td>149</td>
      <td>0.984309</td>
      <td>92.066528</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>el cluster 0,4 y 6 son los que representan agrupan esos registros que representan terrenos con menos porcentajes de pendientes.</p>
<p>Vemos que el punto óptimo en nuestra implementación de <code class="docutils literal notranslate"><span class="pre">K-Means</span></code> son 7 agrupaciones, esto nos puede dar indicios de que nuestro conjunto de datos se segmenta en las 7 clases de la variable <code class="docutils literal notranslate"><span class="pre">Zonificacion</span></code>, la cual es un nivel de riesgo, es decir, un nombre de la clasificación de amenaza o riesgo del punto de movimiento en masa asignado por geólogos de la alcaldía de Cali basado en el historial de casos de deslizamientos de tierra en la ciudad</p>
<p>Aunque sean bastantes cluster, se evidencia que la mayoría de cluster apuntan a 2 agrupamientos, es decir que nos tratan de decir que hay 2 clases de población dentro de nuestro conjunto de datos</p>
</section>
</section>
<section id="arbol-de-decision">
<h2>Árbol de Decisión<a class="headerlink" href="#arbol-de-decision" title="Link to this heading">#</a></h2>
<p>Entrenar un solo árbol de decisión en un EDA puede ser útil para identificar rápidamente qué variables tienen mayor relevancia en la predicción del objetivo.</p>
<p>Los árboles de decisión dividen los datos en función de las características más informativas, esto te permite identificar qué variables son más útiles para predecir la variable dependiente. Tambien es nos ayuda en la interpretabilidad, ya que el árbol muestra claramente cómo se hace la toma de decisiones basadas en las características y qué variables se consideran importantes a cada paso y a la identificación de relaciones no lineales, porque pueden manejar relaciones no lineales entre variables, lo que te permite captar patrones que a veces no son evidentes con técnicas lineales.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">independent_var_erase</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;10d&#39;</span><span class="p">]</span> <span class="c1"># Eliminamos la variable de precipitacion acumulada a 10 dias</span>
<span class="n">dependent_var</span><span class="o">=</span><span class="s1">&#39;deslizamientos&#39;</span>
<span class="n">independent_var</span><span class="o">=</span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">independent_var_erase</span> <span class="ow">and</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dependent_var</span><span class="p">]</span>
<span class="n">X</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">independent_var</span><span class="p">]</span>
<span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">dependent_var</span><span class="p">]</span>
<span class="n">VAR_categorical_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">cname</span> <span class="k">for</span> <span class="n">cname</span> <span class="ow">in</span> <span class="n">X</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">X</span><span class="p">[</span><span class="n">cname</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span> <span class="o">==</span> <span class="s2">&quot;object&quot;</span><span class="p">]</span>
<span class="n">VAR_numerical_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">cname</span> <span class="k">for</span> <span class="n">cname</span> <span class="ow">in</span> <span class="n">X</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">X</span><span class="p">[</span><span class="n">cname</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;int64&#39;</span><span class="p">,</span> <span class="s1">&#39;float64&#39;</span><span class="p">]]</span>
<span class="n">VAR_cols</span> <span class="o">=</span> <span class="n">VAR_categorical_cols</span> <span class="o">+</span> <span class="n">VAR_numerical_cols</span>
<span class="n">label_encoders</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">VAR_categorical_cols</span><span class="p">:</span>
    <span class="n">le</span> <span class="o">=</span> <span class="n">LabelEncoder</span><span class="p">()</span>
    <span class="n">X</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span> <span class="o">=</span> <span class="n">le</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">feature</span><span class="p">])</span>
    <span class="n">label_encoders</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span> <span class="o">=</span> <span class="n">le</span>

<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">train_size</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span><span class="n">random_state</span><span class="o">=</span><span class="mi">23</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tree</span> <span class="o">=</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">tree</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="c1"># Hacer predicciones en el conjunto de prueba</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="c1"># Medir el rendimiento (en clasificación, por ejemplo)</span>
<span class="n">accuracy</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Accuracy: </span><span class="si">{</span><span class="n">accuracy</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Accuracy: 0.8842105263157894
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>  <span class="c1"># Ajustar el tamaño de la figura</span>
<span class="n">plot_tree</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> 
          <span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
          <span class="n">feature_names</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> 
          <span class="n">class_names</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
          <span class="n">rounded</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
          <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>  <span class="c1"># Ajustar el tamaño de la letra</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2cb7dec9419982cfc28516242ae6d3dfbc6366b1d0c01cb6402e6f8260fa1c8c.png" src="_images/2cb7dec9419982cfc28516242ae6d3dfbc6366b1d0c01cb6402e6f8260fa1c8c.png" />
</div>
</div>
<p>El nodo raíz indica que la primera condición a evaluar es la <code class="docutils literal notranslate"><span class="pre">15d</span></code> (Precipitación de lluvia acumulada en 15 días en milímetros) del terreno. Si la varaible es menor o igual a 73.6, se avanza por la rama izquierda; de lo contrario, se avanza por la derecha.</p>
<p>Los nodos finales (hojas) muestran la clase predicha (0 o 1) y el número de muestras en cada hoja. También se indica el valor de las muestras clasificadas, con la mayoría en una clase reflejando el resultado esperado.
Por ejemplo, un nodo puede indicar que, si <code class="docutils literal notranslate"><span class="pre">PENDIENT</span></code> es menor o igual a 48.463 y <code class="docutils literal notranslate"><span class="pre">7d</span></code> es menor o igual a 53.9, se clasifica como <code class="docutils literal notranslate"><span class="pre">deslizamiento</span></code> (y[1]).</p>
<p>El <code class="docutils literal notranslate"><span class="pre">índice</span> <span class="pre">de</span> <span class="pre">Gini</span></code> se muestra en cada nodo, que mide la pureza de los nodos. Un valor de 0 indica pureza completa (todas las muestras de una clase) y valores cercanos a 1 indican mezcla de clases. Los nodos con menor índice de Gini se consideran mejores para la clasificación.</p>
<p>Las variables más significativas como <code class="docutils literal notranslate"><span class="pre">15d</span></code>, <code class="docutils literal notranslate"><span class="pre">PENDIENT</span></code>, y <code class="docutils literal notranslate"><span class="pre">30d</span></code>, son cruciales para determinar la probabilidad de deslizamientos.</p>
</section>
<section id="correlaciones-entre-variables-independientes">
<h2>Correlaciones entre variables independientes<a class="headerlink" href="#correlaciones-entre-variables-independientes" title="Link to this heading">#</a></h2>
<p>El objetivo es que exista la menor correlación lineal y no lineal entre las variables independientes, ya que deseamos que cada variable aporte su valor independiente al modelo, y evitar redundancias</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Correlaciones entre variables independientes</span>
<span class="n">correlation_matrix</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">columnas_a_graficar</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;pearson&#39;</span><span class="p">)</span>

<span class="c1"># Configurar el estilo del mapa de calor</span>

<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>

<span class="c1"># Crear el mapa de calor de correlación</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">correlation_matrix</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">)</span>

<span class="c1"># Añadir título</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Mapa de calor de correlación entre variables numéricas&#39;</span><span class="p">)</span>

<span class="c1"># Mostrar el mapa de calor</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/e5bb09ad4f0fca1654cd82c4b7a5778c1c0592a7756e9e81d209db613da8d3bc.png" src="_images/e5bb09ad4f0fca1654cd82c4b7a5778c1c0592a7756e9e81d209db613da8d3bc.png" />
</div>
</div>
<p>Observamos que existe una alta correlación lineal entre las variables númericas de precipitación, dándonos a entender que no son del todo independientes y que a medida que suben los dias (10 dias, 15 dias, 30 dias y así sucesivamente) aumenta su dependencia.</p>
<p>Esto genera multicolinealidad, lo que puede hacer que los coeficientes en modelos lineales (como la regresión logística, que se modelará en este analisis) se vuelvan inestables y difíciles de interpretar, esto ocurre porque el modelo no puede distinguir fácilmente el efecto individual de cada variable correlacionada.</p>
<p>Tambien se podria explorar como se ve la matriz de correlaciones, eliminando algunas variables para hacer mas grande la brecha que separa los dias acumulados, es decir en ves de usar una variable como <code class="docutils literal notranslate"><span class="pre">7d</span></code> y <code class="docutils literal notranslate"><span class="pre">10d</span></code>, usar variables que representen brechas de acumulacion de lluvia mas grande para tratar de disminuir la multicolinealidad</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">columnas_a_graficar2</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;24h&#39;</span><span class="p">,</span><span class="s1">&#39;10d&#39;</span><span class="p">,</span><span class="s1">&#39;30d&#39;</span><span class="p">,</span><span class="s1">&#39;90d&#39;</span><span class="p">]</span> 
<span class="c1"># Correlaciones entre variables independientes</span>
<span class="n">correlation_matrix</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">columnas_a_graficar2</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;pearson&#39;</span><span class="p">)</span>

<span class="c1"># Configurar el estilo del mapa de calor</span>

<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>

<span class="c1"># Crear el mapa de calor de correlación</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">correlation_matrix</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">)</span>

<span class="c1"># Añadir título</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Mapa de calor de correlación entre variables numéricas - 2&#39;</span><span class="p">)</span>

<span class="c1"># Mostrar el mapa de calor</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/22ed9a7e5c251b8831271216f2c07713333c54e1de0a8b3005be0f2e7c32eade.png" src="_images/22ed9a7e5c251b8831271216f2c07713333c54e1de0a8b3005be0f2e7c32eade.png" />
</div>
</div>
<p>Al eliminar ciertas variables, el mapa de calor se torna menos rojo, es decir hay menos variables que nos aportan multicolinealidad. Este conjunto de variables se pueden evaluar para la selecicon de features a tomar en cuenta para cada modelo.</p>
<p>Las variables altamente correlacionadas aportan información redundante. Esto puede hacer que el modelo sea más complejo de lo necesario, sin mejorar el rendimiento predictivo, lo cual puede llevar a un modelo sobre ajustado que no generaliza bien a datos nuevos. En algunos casos, los algoritmos de clasificación que se usarán en este análisis, como los árboles de decisión o los modelos basados en conjuntos (e.g., Random Forest, XGBoost), no se ven tan afectados por la multicolinealidad, pero la presencia de variables altamente correlacionadas puede todavía llevar a un modelo más complejo de lo necesario.</p>
</section>
<section id="decisiones">
<h2>Decisiones<a class="headerlink" href="#decisiones" title="Link to this heading">#</a></h2>
<p>Del EDA podemos concluir que sería bueno eliminar ciertas variables numéricas debido a la alta redundancia entre las mismas, esta decisión dependerá del modelo a utilizar, ya que esto afecta de maneras diferentes cada modelo. En cuanto a las variables categóricas se decidirá trabajar con todas, se usará un codificador de etiquetas y no un one-hot encoder debido a la cantidad de clases que puede tomar una categoría.</p>
<p>La data de entrenamiento puede variar dependiendo del modelo a usar y los rendimientos de este.</p>
<section id="por-que-utilizar-modelos-de-ml">
<h3>¿Por qué utilizar Modelos de ML?<a class="headerlink" href="#por-que-utilizar-modelos-de-ml" title="Link to this heading">#</a></h3>
<p>Para determinar si es necesario un enfoque de Machine Learning y aplicar analítica predictiva o si solo es necesario un método de clasificación más sencillo, primero debemos comprender el problema en este caso, se quiere estimar la probabilidad de que un registro pertenezca a la clase “1” o “0”, lo cual se puede abordar como un problema de clasificación binaria. Sin embargo, lo que debes analizar es la complejidad del problema para decidir si un enfoque más simple es suficiente.</p>
<p>Para esto, se procede en esta sección a <strong>evaluar la complejidad de las relaciones entre las variables</strong> donde se exploran las relaciones entre las variables mediante visualizaciones como gráficos de dispersión, histogramas o matrices de correlación. Podemos también indagar si las variables predictoras están fuertemente correlacionadas con la variable objetivo, es posible que un modelo simple de estadística (como una regresión logística) sea suficiente.</p>
<p>También, para evaluar el por qué usar modelos de ML, en esta seccion de prueban modelos simples y técnicas de agrupamiento para medir que tanto valor aportan para nuestro objetivo de investigación, como una clusterizacion y la aplicación simple de un árbol de decisión.</p>
<p>De la misma manera, se puede indagar en la implementación de varios modelos, así como hacemos en las otras secciones de esta página. En cada una de estas implementaciones, se evalúa el rendimiento de cada modelo para ver si un método inclinado por el aprendizaje de maquina puede resolver nuestro problema o no.</p>
<p>Un punto muy a favor de porque usar modelos de ML en este estudio, es que capturan patrones complejos. Los modelos de ML pueden identificar relaciones no lineales y complejas entre la variable binaria deslizamiento y otras variables numéricas (como las de precipitaciones). Esto es difícil de lograr con técnicas básicas, que a menudo asumen una relación lineal. También nos ofrece grandes ventajas como Capacidad para Manejar Múltiples Variables, Flexibilidad y Escalabilidad, Reducción del Sesgo Humano.</p>
<p>En resumen, los modelos de ML ofrecen una mayor precisión, adaptabilidad y eficiencia, lo que los hace ideales para clasificar deslizamiento en escenarios donde los patrones de los datos son complejos y cambiantes.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Contextualización de la Problemática</p>
      </div>
    </a>
    <a class="right-next"
       href="implementacion-randomforest.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Implementación 1: Modelo RandomForest</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importacion-de-librerias-y-creacion-de-funciones">Importación de librerias y creación de funciones</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-numericas">Variables Numéricas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-categoricas">Variables categóricas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#agrupaciones">Agrupaciones</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-cluster">Análisis Cluster</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arbol-de-decision">Árbol de Decisión</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#correlaciones-entre-variables-independientes">Correlaciones entre variables independientes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decisiones">Decisiones</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#por-que-utilizar-modelos-de-ml">¿Por qué utilizar Modelos de ML?</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Simon Lopez Ramos
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>